<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Clock with Weather</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    background: #000;
    color: #fff;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 100%;
    width: 100%;
    padding: 0 20px;
  }
  #time {
    font-size: 10vw;
    font-weight: bold;
    text-align: left;
  }
  #weather {
    font-size: 2vw;
    display: flex;
    align-items: center;
    justify-content: flex-end;
  }
  #weather-icon {
    margin-right: 10px;
    width: 50px;
    height: 50px;
  }
</style>
</head>
<body>
  <div id="time">--:--</div>
  <div id="weather">
    <img id="weather-icon" src="" alt="Weather Icon">
    <span id="temperature">--Â°</span>
  </div>

<script>
function updateTime() {
  const now = new Date();
  let hours = now.getHours();
  const minutes = now.getMinutes().toString().padStart(2,'0');
  const ampm = hours >= 12 ? 'PM' : 'AM';
  hours = hours % 12;
  hours = hours ? hours : 12;
  document.getElementById('time').textContent = `${hours}:${minutes} ${ampm}`;
}

// Open-Meteo: Belleair, FL approximate coordinates
const latitude = 27.9186;
const longitude = -82.8053;

// Mapping Open-Meteo weather codes to emoji icons
const weatherIcons = {
  0: 'â˜€ï¸', // Clear sky
  1: 'ðŸŒ¤ï¸', // Mainly clear
  2: 'â›…',  // Partly cloudy
  3: 'â˜ï¸', // Overcast
  45: 'ðŸŒ«ï¸', // Fog
  48: 'ðŸŒ«ï¸', // Depositing rime fog
  51: 'ðŸŒ¦ï¸', // Drizzle light
  53: 'ðŸŒ¦ï¸', // Drizzle moderate
  55: 'ðŸŒ§ï¸', // Drizzle dense
  56: 'ðŸŒ§ï¸', // Freezing drizzle light
  57: 'ðŸŒ§ï¸', // Freezing drizzle dense
  61: 'ðŸŒ§ï¸', // Rain slight
  63: 'ðŸŒ§ï¸', // Rain moderate
  65: 'ðŸŒ§ï¸', // Rain heavy
  66: 'â„ï¸', // Freezing rain light
  67: 'â„ï¸', // Freezing rain heavy
  71: 'â„ï¸', // Snow fall slight
  73: 'â„ï¸', // Snow fall moderate
  75: 'â„ï¸', // Snow fall heavy
  80: 'ðŸŒ§ï¸', // Rain showers slight
  81: 'ðŸŒ§ï¸', // Rain showers moderate
  82: 'ðŸŒ§ï¸', // Rain showers violent
  95: 'â›ˆï¸', // Thunderstorm
  96: 'â›ˆï¸', // Thunderstorm with hail
  99: 'â›ˆï¸'  // Thunderstorm with heavy hail
};

async function updateWeather() {
  const url = `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`;
  try {
    const res = await fetch(url);
    const data = await res.json();
    const weatherCode = data.current_weather.weathercode;
    const temp = Math.round(data.current_weather.temperature);

    document.getElementById('temperature').textContent = `${temp}Â°F`;
    document.getElementById('weather-icon').alt = weatherIcons[weatherCode] || 'ðŸŒ¡ï¸';
    document.getElementById('weather-icon').src = `https://twemoji.maxcdn.com/v/latest/svg/${getTwemojiCode(weatherIcons[weatherCode] || 'ðŸŒ¡ï¸')}.svg`;
  } catch (err) {
    console.error('Weather fetch error:', err);
  }
}

// Convert emoji to Twemoji code
function getTwemojiCode(emoji) {
  return Array.from(emoji).map(c => c.codePointAt(0).toString(16)).join('-');
}

// Update time every second
setInterval(updateTime, 1000);
updateTime();

// Update weather every 10 minutes
updateWeather();
setInterval(updateWeather, 600000);
</script>
</body>
</html>
